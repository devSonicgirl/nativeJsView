/*! jquery.nativeJsView.js v0.9 */
/*
 * This is a view template that uses native javascript code in HTML.
 * Requires jQuery 1.x or later.
 * See https://github.com/devSonicgirl/nativeJsView
 *
 * Copyright 2017, devSonicgirl
 * Released under the MIT License.
 */
!function(t){"use strict";var r=function(t){this.init=r.prototype.init,this.init(t)};r.prototype={constructor:r,dom:"",js_id:null,script_vars:"",script_body:"",init:function(r){var e=r;t(e).attr("id")||t(e).attr("id","jv_"+(new Date).getTime()+parseInt(100*Math.random()).toString()),this.js_id=t(e).attr("id"),this.dom=t(e).html()},setjs:function(t,r){t&&("vars"==r?this.script_vars=this.script_vars.concat(t,"\n"):"body"==r&&(this.script_body=this.script_body.concat(t,"\n")))},vars_define:function(r){var e=this,c="vars";this.script_vars="",t.each(r,function(t,r){switch(typeof r){case"string":e.setjs("var "+t+' = "'+r.replace(/\"/g,'\\"')+'"',c);break;case"number":e.setjs("var "+t+" = "+r,c);break;case"boolean":e.setjs("var "+t+" = "+r,c);break;case"object":e.setjs("var "+t+" = "+JSON.stringify(r),c);break;case"function":}})},render:function(){var t="jv_render_"+(new Date).getTime(),r="body",e=this.dom;e=e.trim(),e=e.replace(/\n/gm,""),e=e.replace(/>\s+</gm,"><"),e=e.replace(/\&amp;/g,"\\&"),e=e.replace(/\&gt;/g,">"),e=e.replace(/\&lt;/g,"<"),e=e.replace(/\"/g,'\\"'),e=e.replace(/<!-{2,}=(.*?)-{2,}>/g,function(t,r){return r=r.replace(/\\"/g,'"'),'")\n'.concat("put_html(",r.trim(),")\n",'put_html("')}),e=e.replace(/<!-{2,}_(.*?)-{2,}>/g,function(t,r){return r=r.replace(/\\"/g,'"'),'")\n'.concat(r.trim(),"\n",'put_html("')}),this.setjs("var ".concat(t," = ''"),r),this.setjs("function put_html(html) { ".concat(t,"=",t,".concat(html)","}"),r),this.setjs('put_html("'.concat(e,'")'),r),this.setjs("$('#".concat(this.js_id,"').html(",t,")"),r)},call:function(){var r=this.script_vars.concat(this.script_body);try{new Function(r)()}catch(e){console.log("%cjv-error%c "+e,"background-color:#ff0000; color:#ffffff;","color:#000000"),t("#"+this.js_id).html("")}},refresh:function(t){this.vars_define(t),this.call()}},r.prototype.constructor=r,t.fn.nativeJsView=function(t){var e=new r(this);return e.vars_define(t),e.render(),e.call(),e}}(jQuery);
