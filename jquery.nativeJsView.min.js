/*! jquery.nativeJsView.js v0.9 */
/*
 * This is a view template that uses native javascript code in HTML.
 * Requires jQuery 1.x or later.
 * See https://github.com/devSonicgirl/nativeJsView
 *
 * Copyright 2017, devSonicgirl
 * Released under the MIT License.
 */
var global_nativejsview_cell={};!function(t){"use strict";var e=function(t){this.init=e.prototype.init,this.init(t)};e.prototype={constructor:e,dom:"",js_id:null,script_vars:"",script_body:"",init:function(e){var r=e;t(r).attr("id")||t(r).attr("id","jv_"+(new Date).getTime()+parseInt(100*Math.random()).toString()),this.js_id=t(r).attr("id"),this.dom=t(r).html()},setjs:function(t,e){t&&("vars"==e?this.script_vars=this.script_vars.concat(t,"\n"):"body"==e&&(this.script_body=this.script_body.concat(t,"\n")))},vars_define:function(e){var r=this,i="vars";this.script_vars="",t.each(e,function(t,e){switch(typeof e){case"string":r.setjs("var "+t+' = "'+e.replace(/\"/g,'\\"')+'"',i);break;case"number":r.setjs("var "+t+" = "+e,i);break;case"boolean":r.setjs("var "+t+" = "+e,i);break;case"object":r.setjs("var "+t+" = "+JSON.stringify(e),i);break;case"function":}})},render:function(){var t="jv_render_"+(new Date).getTime(),e="body",r=this.dom;r=r.trim(),r=r.replace(/\n/gm,""),r=r.replace(/>\s+</gm,"><"),r=r.replace(/\&amp;/g,"\\&"),r=r.replace(/\&gt;/g,">"),r=r.replace(/\&lt;/g,"<"),r=r.replace(/\"/g,'\\"'),r=r.replace(/<!-{2,}=(.*?)-{2,}>/g,function(t,e){return e=e.replace(/\\"/g,'"'),'")\n'.concat("put_html(",e.trim(),")\n",'put_html("')}),r=r.replace(/<!-{2,}_(.*?)-{2,}>/g,function(t,e){return e=e.replace(/\\"/g,'"'),'")\n'.concat(e.trim(),"\n",'put_html("')}),this.setjs("var ".concat(t," = ''"),e),this.setjs("function put_html(html) { ".concat(t,"=",t,".concat(html)","}"),e),this.setjs('put_html("'.concat(r,'")'),e),this.setjs("$('#".concat(this.js_id,"').html(",t,")"),e)},call:function(){var e=this.script_vars.concat(this.script_body);try{new Function(e)()}catch(r){console.log("%cjv-error%c "+r,"background-color:#ff0000; color:#ffffff;","color:#000000"),t("#"+this.js_id).html("")}},refresh:function(t){this.vars_define(t),this.call()}},e.prototype.constructor=e,t.fn.nativeJsView=function(t){var r,i=this.attr("id");return void 0===global_nativejsview_cell[i]?(r=new e(this),r.vars_define(t),r.render(),r.call(),global_nativejsview_cell[i]=r):(r=global_nativejsview_cell[i],r.refresh(t)),r}}(jQuery);
